/* === Hafizh Signature Code ===
Author: Hafizh Rizqullah — GeminiAnswerBot Specialist
File: assets/popup.css
Created: 2025-08-27 12:05:00 */

/* == BASE COLORS & VARIABLES (Light Mode First) ================= */
:root {
  --bg-color: #f0f0f5;
  --panel-bg: #ffffff;
  --header-bg: #ffffff;
  --primary-text: #2c2c2e;
  --secondary-text: #636366;
  --tertiary-text: #8a8a8e;
  --border-color: #e3e3e6;
  --separator-color: #e8e8eb;
  --icon-button-hover-bg: #e9e9eb;
  --action-button-bg: #007aff;
  --action-button-text: #ffffff;
  --action-button-hover-bg: #0071e3;
  --accent-green: #34c759;
  --accent-red: #ff3b30;
  --error-bg: #fff0f0;
  --error-border: #ffdada;
  --error-text: #d93025;
  --info-bg: #eef5ff;
  --info-border: #d6eaff;
  --info-text: #004085;
  --skeleton-bg: #e1e1e6;
  --base-font-size: 14px;
  --line-height: 1.5;
  --main-border-radius: 16px;
  --button-border-radius: 10px;
  --main-padding: 16px;
  --panel-padding: 16px;
  --header-padding: 12px 16px;
  --spacing-medium: 12px;
}

/* == DARK MODE COLORS =========================================== */
@media (prefers-color-scheme: dark) {
  :root {
    --bg-color: #000000;
    --panel-bg: #1c1c1e;
    --header-bg: #1c1c1e;
    --primary-text: #f5f5f7;
    --secondary-text: #98989d;
    --tertiary-text: #7d7d81;
    --border-color: #38383a;
    --separator-color: #363638;
    --icon-button-hover-bg: #3a3a3c;
    --action-button-bg: #0a84ff;
    --action-button-hover-bg: #0077f0;
    --accent-green: #30d158;
    --accent-red: #ff453a;
    --error-bg: #3d2525;
    --error-border: #5c3b3b;
    --error-text: #ff887f;
    --info-bg: #1c2a3e;
    --info-border: #2a4161;
    --info-text: #cce5ff;
    --skeleton-bg: #3a3a3c;
  }
}

/* == GLOBAL RESET ============================================== */
* { box-sizing: border-box; }
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  width: 400px; max-height: 598px; margin: 0;
  background-color: var(--bg-color); color: var(--primary-text);
  font-size: var(--base-font-size); line-height: var(--line-height);
  -webkit-font-smoothing: antialiased; display: flex; flex-direction: column;
}
.hidden { display: none !important; }

/* == LAYOUT ==================================================== */
.container { display: flex; flex-direction: column; height: 100%; }
.content-area {
  padding: 12px; flex-grow: 1; overflow-y: auto;
  display: flex; flex-direction: column;
}
.content-area::-webkit-scrollbar { width: 6px; }
.content-area::-webkit-scrollbar-thumb { background-color: var(--tertiary-text); border-radius: 3px; }

#panel-container {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-medium);
}

.main-panel { background-color: var(--panel-bg); border-radius: var(--main-border-radius); }

/* == HEADER (Top Bar) ========================================== */
.header {
  display: flex; justify-content: space-between; align-items: center;
  padding: var(--header-padding); border-bottom: 1px solid var(--border-color);
  background-color: var(--header-bg); flex-shrink: 0;
}
.header-title { display: flex; align-items: center; gap: 10px; font-weight: 600; font-size: 15px; }
.header-icon { width: 18px; height: 18px; color: var(--action-button-bg); }
.header-actions { display: flex; align-items: center; gap: 8px; }

/* == PANEL & CONTENT STYLING =================================== */
.panel-header { display: flex; align-items: center; padding: 12px var(--panel-padding); gap: 8px; }
.panel-title-pill {
  font-size: 12px; font-weight: 500; color: var(--secondary-text);
  background-color: var(--bg-color); padding: 4px 10px; border-radius: 20px;
  margin-right: auto;
}
.panel-header-action {
  width: 28px; height: 28px; display: flex; align-items: center;
  justify-content: center; border-radius: 50%; color: var(--secondary-text);
  background-color: transparent; cursor: pointer;
  transition: background-color 0.2s, color 0.2s;
}
.panel-header-action:hover { background-color: var(--icon-button-hover-bg); color: var(--primary-text); }
.panel-header-action svg { width: 14px; height: 14px; stroke: currentColor; stroke-width: 2.2; }
.panel-content { padding: 0 var(--panel-padding) var(--panel-padding); word-wrap: break-word; }
.panel-content:first-child { padding-top: var(--panel-padding); }
.panel-content > *:first-child { margin-top: 0; }
.panel-content > *:last-child { margin-bottom: 0; }

/* Centralized Typography System */
.panel-content p { margin: 0 0 0.8em 0; color: var(--secondary-text); }
.panel-content p:last-child { margin-bottom: 0; }
.panel-content strong { font-weight: 600; color: var(--primary-text); }
.panel-content h3 { font-size: 1.1em; font-weight: 600; margin: 0 0 0.5em 0; }
.panel-content ul { list-style-type: none; padding-left: 0; margin: 1em 0; }
.panel-content li { margin-bottom: 0.75em; padding-left: 22px; position: relative; color: var(--secondary-text); }
.panel-content li::before {
  content: '•'; position: absolute; left: 4px; top: 0;
  color: var(--action-button-bg); font-size: 18px;
}
.panel-content code {
  background-color: var(--bg-color);
  border: 1px solid var(--border-color);
  border-radius: 5px;
  padding: 2px 6px;
  font-family: 'SF Mono', 'Menlo', 'monospace';
  font-size: 0.9em;
  color: var(--primary-text);
}
.panel-content pre { margin: 1em 0; padding: 12px; border-radius: 8px; background-color: var(--bg-color); }
.panel-content pre code { padding: 0; background-color: transparent; border: none; }

/* == ACTION BUTTONS ==================== */
.action-buttons-container { display: flex; gap: 12px; }
.action-button {
  flex-grow: 1; padding: 10px 14px; font-size: 14px; font-weight: 600;
  border: none; border-radius: var(--button-border-radius); cursor: pointer;
  background-color: var(--action-button-bg); color: var(--action-button-text);
  transition: background-color 0.2s; display: flex; align-items: center;
  justify-content: center; gap: 8px;
}
.action-button:hover { background-color: var(--action-button-hover-bg); }
.action-button:disabled {
  background-color: var(--border-color); color: var(--secondary-text);
  cursor: not-allowed; filter: none;
}

/* NEW: Styles for the verification button */
.verification-container {
  padding: 12px var(--panel-padding) 0;
  border-top: 1px solid var(--separator-color);
  margin-top: var(--panel-padding);
}

.action-button.verify {
  background-color: #ff9500; /* Orange for warning/attention */
}
@media (prefers-color-scheme: dark) {
  .action-button.verify {
    background-color: #ff9f0a;
  }
}
.action-button.verify:hover {
  background-color: #f59000;
}
.action-button.verify:disabled {
  background-color: var(--border-color);
}
.action-button.verify .spinner {
  width: 16px;
  height: 16px;
  border-width: 2px;
  border-top-color: var(--action-button-text);
  margin: 0;
}

/* == ANSWER DISPLAY ========================================== */
#answerDisplay .answer-highlight {
  border-left: 3px solid var(--action-button-bg); padding-left: 12px;
  font-size: 15px; font-weight: 500; animation: fadeIn 0.4s ease-in-out;
  margin: 0; color: var(--primary-text);
}
.confidence-wrapper {
  margin-top: var(--panel-padding); padding-top: var(--panel-padding);
  border-top: 1px solid var(--separator-color); display: flex;
  flex-direction: column; gap: 12px; font-size: 13px;
}
.confidence-level { display: flex; justify-content: space-between; align-items: center; }
.confidence-level-label { font-weight: 500; color: var(--secondary-text); }
.confidence-badge {
  padding: 4px 12px; border-radius: 20px; font-weight: 600;
  font-size: 12px; color: #1d1d1f;
}
.confidence-high { background-color: var(--accent-green); }
.confidence-medium { background-color: #ffcc00; }
.confidence-low { background-color: var(--accent-red); color: #ffffff; }
.confidence-reason { color: var(--secondary-text); }
.token-count {
  display: flex; justify-content: space-between; align-items: center;
  font-size: 12px; color: var(--tertiary-text); margin-top: 12px;
  padding-top: 12px; border-top: 1px dashed var(--separator-color);
}
@keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

/* == FEEDBACK & CORRECTION =================================== */
.panel-footer {
    display: flex; justify-content: space-between; align-items: center;
    padding: 12px var(--panel-padding); border-top: 1px solid var(--separator-color);
}
.footer-label { font-size: 13px; color: var(--secondary-text); font-weight: 500; }
.feedback-buttons { display: flex; gap: 8px; }
.feedback-button {
    width: 36px; height: 36px; display: inline-flex; align-items: center;
    justify-content: center; border-radius: 50%; border: 1px solid var(--border-color);
    background-color: var(--panel-bg); color: var(--secondary-text);
    cursor: pointer; transition: all 0.2s ease;
}
.feedback-button:hover {
    background-color: var(--icon-button-hover-bg); color: var(--primary-text);
    transform: scale(1.1);
}
.feedback-button.selected-correct {
    background-color: var(--accent-green); border-color: var(--accent-green);
    color: white; cursor: default;
}
.feedback-button.selected-incorrect {
    background-color: var(--accent-red); border-color: var(--accent-red);
    color: white; cursor: default;
}
.feedback-button:disabled { opacity: 0.7; cursor: not-allowed; transform: none; }
.feedback-button:disabled:hover { background-color: var(--panel-bg); }
#correctionOptions .correction-option-button {
    width: 100%; padding: 10px 14px; font-size: 14px; text-align: left;
    border: 1px solid var(--border-color); background-color: var(--bg-color);
    color: var(--primary-text); border-radius: var(--button-border-radius);
    cursor: pointer; transition: background-color 0.2s, border-color 0.2s;
    line-height: 1.4;
}
#correctionOptions .correction-option-button:hover { background-color: var(--icon-button-hover-bg); }

/* == GENERIC STATES (Loading, Error, Info) =================== */
.loading-state {
  display: flex; flex-direction: column; justify-content: center;
  align-items: center; flex-grow: 1; color: var(--secondary-text);
  text-align: center;
}
.loading-state.full-page { min-height: 250px; }

.spinner {
  width: 28px; height: 28px; border-radius: 50%; margin-bottom: 16px;
  border: 4px solid var(--border-color); border-top-color: var(--action-button-bg);
  animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* New spinner for use inside panels */
.panel-loader {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
  min-height: 80px;
}
.panel-spinner {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  border: 3px solid var(--border-color);
  border-top-color: var(--action-button-bg);
  animation: spin 1s linear infinite;
}

.info-panel, .error-panel {
    border-radius: var(--main-border-radius); padding: var(--panel-padding);
    display: flex; flex-direction: column; gap: 12px;
}
.info-panel { background-color: var(--info-bg); border: 1px solid var(--info-border); color: var(--info-text); }
.error-panel { background-color: var(--error-bg); border: 1px solid var(--error-border); color: var(--error-text); }
.info-panel-header, .error-panel-header { font-size: 16px; font-weight: 600; }
.info-panel-body p, .error-panel-body p { margin: 0; line-height: 1.5; }

/* == ONBOARDING VIEW =========================================== */
.onboarding-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: 40px 24px !important;
}
.onboarding-icon {
  color: var(--action-button-bg);
  margin-bottom: 16px;
}
.onboarding-content h3 {
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 8px 0;
}
.onboarding-content p {
  color: var(--secondary-text);
  max-width: 300px;
  margin: 0 0 24px 0;
}
.onboarding-content .action-button {
  width: 100%;
  max-width: 250px;
}

/* == UTILITY =================================================== */
.icon-button {
  width: 32px; height: 32px; background-color: transparent; border: none;
  border-radius: 8px; cursor: pointer; display: flex; align-items: center;
  justify-content: center; color: var(--secondary-text);
  transition: background-color 0.2s, color 0.2s; padding: 0;
}
.icon-button:hover { background-color: var(--icon-button-hover-bg); color: var(--primary-text); }
.icon-button.copied { color: var(--accent-green) !important; }
.icon-button svg { width: 18px; height: 18px; stroke: currentColor; stroke-width: 2.2; }
#imagePreviewContainer {
    padding: 10px; display: flex; flex-direction: column;
    align-items: center; gap: 10px; animation: fadeIn 0.3s;
}
#imagePreview { max-width: 100%; max-height: 180px; border-radius: 8px; object-fit: contain; border: 1px solid var(--border-color); }
#imageStatusText { font-size: 13px; color: var(--secondary-text); margin: 0; }